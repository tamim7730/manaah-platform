# منصة مناعة - إدارة ورصد الأمراض الوبائية

نظام متطور لرصد وإدارة الأمراض الوبائية في المملكة العربية السعودية.

## المرحلة الثانية - الواجهة الخلفية

تم تطوير الواجهة الخلفية بالكامل مع جميع المتطلبات المحددة.

### الميزات المُنفذة

#### 🔐 نظام المصادقة والتفويض
- تسجيل الدخول باستخدام JWT
- إدارة الجلسات
- نظام الصلاحيات (Admin, Data Entry, Viewer)
- حماية API endpoints

#### 🦠 إدارة الأمراض
- CRUD كامل للأمراض الوبائية
- تصنيف حسب الخطورة
- البحث والتصفية

#### 🗺️ إدارة المناطق والمحافظات
- 13 منطقة إدارية سعودية
- 134 محافظة
- دعم البيانات الجغرافية (GeoJSON)
- تصنيف الحزام الوبائي

#### 📊 إدارة المسوحات
- CRUD للمسوحات الميدانية
- ربط المسوحات بالأمراض والمحافظات
- تتبع حالة المسح
- إحصائيات العينات

#### 🐄 بيانات الثروة الحيوانية
- تسجيل أعداد الحيوانات
- تتبع الحالة الصحية
- معدلات التطعيم والوفيات

#### 🦟 كثافة البعوض
- مراقبة كثافة البعوض
- تحديد المواقع الجغرافية
- تسجيل الأنواع المكتشفة
- الظروف الجوية

#### 🧪 العينات الإيجابية
- تسجيل نتائج الفحوصات
- تتبع العينات المختبرية
- معلومات الممرض والمختبر

### التقنيات المستخدمة

- **Framework**: Next.js 14 مع TypeScript
- **Database**: PostgreSQL مع PostGIS
- **Authentication**: JWT مع bcrypt
- **API**: RESTful APIs
- **Testing**: Jest مع Testing Library

### إعداد المشروع

#### 1. تثبيت المتطلبات
\`\`\`bash
npm install
\`\`\`

#### 2. إعداد قاعدة البيانات
\`\`\`bash
# إنشاء قاعدة البيانات
createdb manaah_platform

# تشغيل المخطط
node scripts/setup-database.js

# إدراج البيانات التجريبية
node scripts/seed-sample-data.js
\`\`\`

#### 3. إعداد متغيرات البيئة
\`\`\`bash
cp .env.example .env.local
# تحرير الملف وإضافة قيم قاعدة البيانات
\`\`\`

#### 4. تشغيل المشروع
\`\`\`bash
npm run dev
\`\`\`

### API Endpoints

#### المصادقة
- `POST /api/auth/login` - تسجيل الدخول
- `POST /api/auth/logout` - تسجيل الخروج
- `GET /api/auth/me` - معلومات المستخدم الحالي

#### الأمراض
- `GET /api/diseases` - جلب جميع الأمراض
- `POST /api/diseases` - إضافة مرض جديد
- `GET /api/diseases/[id]` - جلب مرض محدد
- `PUT /api/diseases/[id]` - تحديث مرض
- `DELETE /api/diseases/[id]` - حذف مرض

#### المناطق والمحافظات
- `GET /api/regions` - جلب جميع المناطق
- `GET /api/regions/[id]/governorates` - جلب محافظات منطقة
- `GET /api/governorates` - جلب جميع المحافظات

#### المسوحات
- `GET /api/surveys` - جلب جميع المسوحات
- `POST /api/surveys` - إضافة مسح جديد
- `GET /api/surveys/[id]` - جلب مسح محدد
- `PUT /api/surveys/[id]` - تحديث مسح

### الاختبارات

\`\`\`bash
# تشغيل جميع الاختبارات
npm test

# تشغيل الاختبارات مع المراقبة
npm run test:watch
\`\`\`

### الأمان

- تشفير كلمات المرور باستخدام bcrypt
- JWT tokens مع انتهاء صلاحية
- التحقق من الصلاحيات على مستوى API
- حماية من SQL Injection
- تنظيف البيانات المدخلة

### قاعدة البيانات

#### الجداول الرئيسية
- `users` - المستخدمين
- `regions` - المناطق الإدارية
- `governorates` - المحافظات
- `diseases` - الأمراض الوبائية
- `surveys` - المسوحات
- `livestock_data` - بيانات الثروة الحيوانية
- `mosquito_density` - كثافة البعوض
- `positive_samples` - العينات الإيجابية

#### الفهارس
تم إنشاء فهارس محسنة لتحسين الأداء على:
- الاستعلامات الجغرافية
- البحث بالتاريخ
- الربط بين الجداول

### المرحلة التالية

الآن يمكن البدء في المرحلة الثالثة:
- تطوير واجهة المستخدم للوحة التحكم
- إضافة الخرائط التفاعلية
- تطوير التقارير والتحليلات
- إضافة نظام الإشعارات

### الدعم

للحصول على المساعدة أو الإبلاغ عن مشاكل، يرجى التواصل مع فريق التطوير.
